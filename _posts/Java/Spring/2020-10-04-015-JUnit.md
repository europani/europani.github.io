---
layout: post
title: JUnit
categories: Spring
tags: [Spring, Junit]
---

### 어노테이션
#### 1. JUnit 어노테이션

1. `@Test` : 단위테스트 메서드 명시
   - @Test(timeout = 5000) : 테스트시간 제한부여, 결과반환에 5000ms을 넘기면 실패선언
   - @Test(expected=RuntimeException.class) : Exception부여, 명시한 Exception 발생시 성공선언

2. `@Before` : 단위테스트 전에 실행될 메서드 명시

3. `@After` : 단위테스트 후에 실행될 메서드 명시

4. `@BeforeClass` : 모든 테스트 전에 실행될 메서드 명시(테스트 클래스 수행시 1번만 실행)

5. `@AfterClass` :모든 테스트 후에 실행될 메서드 명시(테스트 클래스 종료시 1번만 실행)

6. `@AfterEach` : 단위테스트가 끝날 때 마다 실행되는 메서드

7. `@Ignore` : 테스트 건너뛰기

#### 2. Spring-Test 어노테이션

1. `@Runwith(SpringJUnit4ClassRunner.class)` : JUnit의 테스트 확장시 사용

2. `@ContextConfiguration` : 스프링 설정파일 지정

### assert메서드

<table style="border-collapse: collapse; width: 71.0466%;" border="1" data-ke-style="style8"><tbody><tr><td style="width: 50%; text-align: center;">assert 메서드</td><td style="width: 50%; text-align: center;">설명</td></tr><tr><td style="width: 50%;"><span style="color: #333333;"><span style="color: #333333;">assertArrayEquals(a,&nbsp;b)</span></span></td><td style="width: 50%;"><span style="color: #333333;">배열 a와 b가 일치하는지 확인</span></td></tr><tr><td style="width: 50%;"><span style="color: #333333;">assertEquals(a, b)</span></td><td style="width: 50%;">객체 a와 b가 같은 값인지 확인</td></tr><tr><td style="width: 50%;"><span style="color: #333333;">assertSame(a,&nbsp;b)</span></td><td style="width: 50%;"><span style="color: #333333;">객체 a와 b가 같은 객체인지 확인</span></td></tr><tr><td style="width: 50%;">assertTrue(a)</td><td style="width: 50%;">조건 a가 참인지 확인</td></tr><tr><td style="width: 50%;">assertNotNull(a)</td><td style="width: 50%;">객체 a가 not Null인지 확인</td></tr><tr><td style="width: 50%;"><span style="color: #333333;">assertThat(a).~~~</span></td><td style="width: 50%;">객체 a가 뒤에 설정한 특정상황 만족하는지 확인(커스터마이징)</td></tr></tbody></table>


### 테스트 케이스 작성
#### 테스트 작성법  
(1) given : 주어진 것  
(2) when : 실행했을때  
(3) then : 결과


```java
// 도메인
@Getter
@Setter
@NoArgsConstructor
public class Member {
      private Long id;
      private String name;
}

// 서비스
public class MemberService {
      private final MemberRepository memberRepository;

      public MemberService(MemberRepository memberRepository) {
          this.memberRepository = memberRepository;
      }
      ... 
}

// 리포지토리 인터페이스
public interface MemberRepository {
      Member save(Member member);
      Optional<Member> findById(Long id);
}

// 리포지토리 구현체
public class MemoryMemberRepository implements MemberRepository {
      private static Map<Long, Member> store = new HashMap<>();
      private static long sequence = 0L;

      @Override
      public Member save(Member member) {
          member.setId(++sequence);
          store.put(member.getId(), member);
          return member;
      }

      @Override
      public Optional<Member> findById(Long id) {
          return Optional.ofNullable(store.get(id));
      }
}
```


```java
class MemoryMemberRepositoryTest {
    MemoryMemberRepository repository = new MemoryMemberRepository();

    @AfterEach
    public void afterEach() {       // 여러번 테스트를 위해 매 테스트가 끝나면 cleanup
        repository.clearStore();
    }

    @Test
    public void save() {
        // 1. given
        Member member = new Member();
        member.setName("spring");

        // 2. when
        repository.save(member);

        // 3. then
        Member result = repository.findById(member.getId()).get();
        assertThat(result).isEqualTo(member);
    }
```