---
layout: post
title: 프로세스(Process)
categories: OS
tags: [OS, CS]
---
## 프로세스
프로세스 : 실행중인 프로그램.  
cf ) 프로그램 : 실행중이지 않은 객체.
- 멀티프로세스 : 다수의 프로세서에서 다수의 프로그램을 동시에 실행하는 것

### 프로세스 상태 및 상태전이
![image](https://user-images.githubusercontent.com/48157259/113371616-c2abf880-93a1-11eb-8472-869cecc62bff.png)

#### 상태  
1. 준비 (Ready)
   - 프로세스가 프로세서를 할당받기 위해 기다리고 있는 상태
   - 새롭게 생성된 프로세스가 **Job Scheduler** 에 의해 준비상태가 됨.
   - 프로세스는 준비상태큐에서 실행 준비
   - 보조기억장치 내에 존재하는 프로그램 실행시 주기억장치로 탑재됨

2. 실행 (Run)
    - 프로세스가 프로세서를 할당 받아 실행되는 상태
    - 준비상태의 프로세스는 **CPU Scheduler** 에 의해 실행상태가 됨.
    - 프로세스 수행 완료 전에 할당 시간이 종료되면 준비상태로 전이
    - 입출력 처리가 필요할 경우 대기상태로 전이

3. 대기 (Wait, Block)
   - 입출력 처리가 필요할 때 현재 실행중인 프로세스가 중단되고 입출력 처리가 완료되는 것을 기다리는 상태

4. 종료 (Terminated)
    - 프로세스 실행이 끝나고 프로세서 할당이 해제된 상태


#### 상태 전이
1. 디스패치 (Dispatch) : 준비 → 실행
2. 시간 초과 (Time Run-out) : 실행 → 준비
3. 깨움 (Wake Up) : 대기 → 준비


## 쓰레드
쓰레드 : 프로세스 내의 작업단위
- 경량 프로세스라고도 불림.
- 멀티쓰레드 : 하나의 프로세서에서 다수의 쓰레드를 돌리는 것
  - 스레드들이 **공유 메모리**를 통해 다수의 작업을 동시에 처리하도록 도와줌
  - 단점 : 하나의 쓰레드가 공유 메모리를 망가뜨리면 모든 쓰레드가 작동 불능상태가 됨. → Critical Section 으로 대비


### 교착상태(Deadlock)
: 둘 이상의 쓰레드가 서로의 작업을 끝나기만을 기다리는 무한 대기 상태

#### 발생조건 
: 4가지 조건 모두 성립시 교착상태 발생 가능
1. 상호배제(Mutual Exclusion) : 한번에 한개의 쓰레드만이 공유지원 사용 가능
2. 점유와 대기(Hold and Wait) : 이미 자원을 가진 상태로 다른 자원 요구
3. 비선점(No Preemption) : 할당된 자원이 끝날때까지 뻇을수 없음
4. 순환대기(Circular Wait) : 순환적으로 다음 프로세스가 차지한 자원 요구


#### 해결방법
1. 예방(Prevention) : 발생 가능성을 낮춤  
   (1) 상호배제 조건 제거 : 임계 영역 제거(공유 제거)  
   (2) 점유와 대기 조건 제거 : 한번에 모든 필요 자원 점유 및 해제  
   (3) 비선점 조건 제거 : 선점으로 변경  
   (4) 순환대기 조건 제거 : 자원 유형에 따라 순서부여

2. 회피(Avoidance) : 발생 가능성을 인정하고 피해감  
   - 예방 조건 네가지중 4번(순환대기 조건)만 적용 X → 자원 순서부여 제거

    (1) 자원 할당 그래프 알고리즘  
    (2) 은행원 알고리즘 : 운영체제가 안전상태를 유지할 수 있는 요구만 수락, 안전상태의 요구는 안전상태를 만족될 수 있을때 까지 거절   
    

3. 무시(Ignore) : 예방과 회피기법의 경우 성능에 영향을 끼칠 수 있기에 별다른 조치를 취하지 않음.

4. 발견(Detection) : 교착상태를 발견하고 회복시킴


