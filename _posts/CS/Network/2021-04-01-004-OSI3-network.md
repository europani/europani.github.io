---
layout: post
title: 네트워크 계층
categories: Network
tags: [Network, CS]
---

### IP
- OSI 7계층 중 네트워크 계층
- 데이터그램(패킷) 기반의 비연결형
- 패킷 분할/조립, 주소 지정, 경로 설정(라우팅)
- 데이터를 수정하지 않고 전송만 함
- IP주소 : 네트워크주소 + 호스트주소

#### (1) IPv4

- a.b.c.d : 4byte[32bit] → (4자리, 자리별 1byte[8bit]로써 0~255 10진수 범위) 
- 기본헤더 : 20byte / 확장헤더 : 40byte
- 특징 : 비연결형, 비신뢰성, 주소 지정, 경로 설정, 최선형 서비스
  
|클래스|네트워크주소|주소지정|용도| 
|:---:|:---:|:---:|:---:|
|A클래스|(0~127).###.###.###|N.H.H.H| |
|B클래스|(128~191).###.###.###|N.N.H.H| |
|C클래스|(192~223).###.###.###|N.N.N.H| |
|D클래스|(224~239).###.###.###| |멀티캐스트용|
|E클래스|(240~255).###.###.###| |예비용|

- 특수주소
    - 0.0.0.0 : 네트워크 자신
    - 255.255.255.255 : 브로드캐스트 주소
    - 호스트 부분이 모두 0 : 네트워크 자체주소
    - 호스트 부분이 모두 1 : 직접적 브로드캐스트
    - 127.0.0.1 (=127.0.0.0/8) : 루프백 주소

- 서브넷마스크 : 네트워크 주소로부터 서브넷팅을 위한 호스트 주소를 얻기 위해 사용
  - IP주소&서브넷마스트 = 네트워크주소
  
| |200|193|130|200|/26| 
|:---:|:---:|:---:|:---:|:---:|---| 
|IP주소|11001000|11000001|10000010|11001000| |
|서브넷마스크|11111111|11111111|11111111|11000000|26bit까지|
| |255|255|255|192| |
|네트워크주소|11001000|11000001|10000010|11000000| |
| |200|193|130|192| |
 


#### (2) IPv6

- a:b:c:d:e:f:g:h : 7byte[128bit] → (8자리, 자리별 2byte[16bit]로써 0~FF(255) 16진수 범위) 
- 기본헤더 : 40byte 
- 특징 : 주소길이 확장, 보안기능 강화(IPsec 기본), 품질기능 강화, 자동설정

### ICMP
- 목적 : IP를 보완하기 위해 -> 오류 보고, 정보 제공
  - IP : 비연결형으로 오류 보고/수정 기능이 없음, 호스트와 관리자를 위한 기능 부재

- 메시지 유형  
  1. 오류보고 메시지 : 라우터나 목적지 호스트가 패킷처리 중 생긴 문제 보고
  2. 질의 메시지 : 라우터나 호스트로부터 정보 획득 목적


### IGMP
- 목적 : 멀티캐스트를 위한 그룹 관리
- 기능 : 그룹 가입, 감시, 응답, 탈퇴를 관리

### ARP
- 목적 : IP(논리주소) -> MAC(물리주소) 으로 변환
- 요청 : 브로드캐스트 / 응답 : 유니캐스트

### RARP
- 목적 : MAC(물리주소) -> IP(논리주소) 으로 변환


### 경로 제어 프로토콜
- 기능 : 패킷을 목적지로 전달하기 위해 인접한 라우터들과 경로 정보를 주고 받아 경로를 설정
- 경로 설정 요소 : 링크상태(대역폭), 지연시간, 신뢰성, 거치는 장비수, MTC(최대 데이터 단위)  
  1. 홉 카운트 : 홉 수 ↓ 
  2. 링크 상태 : 대역폭 ↑
  3. MTU : ↑
  
#### (1) IGP : 하나의 자율시스템(AS) 내의 라우팅
  1. RIP
   - 경로 결정 방법 : 홉 카운트 (최대 홉수 : 15)
   - 소규모
   - 단일 경로 라우팅 프로토콜
   - 거리벡터 알고리즘
   - 30초 마다 라우팅 테이블 정보를 브로드캐스팅
   - 180초 경과 후에도 라우팅 정보를 받지 못하면 해당 경로 테이블에서 제거

  2. OSPF
   - 경로 설정 방법 : 링크 상태(대역폭)
   - 대규모
   - 링크상태 알고리즘 (대역폭이 클수록 비용이 적음)
   - 네트워크 변화 시에만 라우팅 정보 전송


#### (2) EGP : AS 간의 라우팅
  1. BGP
   - 연결형, 신뢰성 (TCP 포트사용)
   - 연결 시 라우팅 테이블을 교환 후 변화가 있을 때만 추가로 교환



